@model QuanLyNhaThuoc.Models.NhanVien

@{
    ViewData["Title"] = "Chỉnh sửa thông tin nhân viên";
}

<h2>@ViewData["Title"]</h2>
<head>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auUqz38rWp3yZ44mwWJ8MRAf8r79G5K5t1NVG/" crossorigin="anonymous">
    <link rel="stylesheet" href="~\wwwroot\css\site.css" /> <!-- Kết nối với CSS riêng -->
</head>

<div class="container mt-4">
    @if (ViewBag.ErrorMessage != null)
    {
        <div class="alert alert-danger">
            @ViewBag.ErrorMessage
        </div>
    }
    <form asp-action="Edit" method="post" onsubmit="return validateForm()">
        <div class="form-group">
            <label for="Ho">Họ</label>
            <input type="text" class="form-control" id="Ho" name="Ho" value="@Model.Ho" />
            <div class="invalid-feedback" id="hoError"></div>
        </div>

        <div class="form-group">
            <label for="Ten">Tên</label>
            <input type="text" class="form-control" id="Ten" name="Ten" value="@Model.Ten" />
            <div class="invalid-feedback" id="tenError"></div>
        </div>

        <div class="form-group">
            <label for="NgaySinh">Ngày sinh</label>
            <input type="date" class="form-control" id="NgaySinh" name="NgaySinh" value="@Model.NgaySinh.ToString("yyyy-MM-dd")" />
        </div>

        <div class="form-group">
            <label for="GioiTinh">Giới tính</label>
            <select class="form-control form-select" id="GioiTinh" name="GioiTinh">
                <option value="Nam" selected="@(Model.GioiTinh == "Nam" ? "selected" : null)">Nam</option>
                <option value="Nữ" selected="@(Model.GioiTinh == "Nữ" ? "selected" : null)">Nữ</option>
            </select>
        </div>

        <div class="form-group">
            <label for="DiaChi">Địa chỉ</label>
            <input type="text" class="form-control" id="DiaChi" name="DiaChi" value="@Model.DiaChi" />
            <div class="invalid-feedback" id="diaChiError"></div>
        </div>

        <div class="form-group">
            <label for="ChucVu">Chức vụ</label>
            <select class="form-control form-select" id="ChucVu" name="ChucVu">
                <option value="Nhân viên Bán Hàng" selected="@(Model.ChucVu == "Nhân viên Bán Hàng" ? "selected" : null)">Nhân viên Bán Hàng</option>
                <option value="Nhân viên Kho" selected="@(Model.ChucVu == "Nhân viên Kho" ? "selected" : null)">Nhân viên Kho</option>
            </select>
        </div>


        <div class="form-group">
            <label for="NgayTuyenDung">Ngày tuyển dụng</label>
            <input type="date" class="form-control" id="NgayTuyenDung" name="NgayTuyenDung" value="@Model.NgayTuyenDung.ToString("yyyy-MM-dd")" />
        </div>

        <div class="form-group">
            <label for="TrangThai">Trạng thái</label>
            <select class="form-control form-select" id="TrangThai" name="TrangThai">
                <option value="Đang làm" selected="@(Model.TrangThai == "Đang làm" ? "selected" : null)">Đang Làm</option>
                <option value="Đã nghĩ" selected="@(Model.TrangThai == "Đã nghĩ" ? "selected" : null)">Đã Nghĩ</option>
            </select>
        </div>

        <div class="form-group">
            <label for="MaCaLamViec">Mã ca làm việc</label>
            <input type="number" class="form-control" id="MaCaLamViec" name="MaCaLamViec" value="@Model.MaCaLamViec" />
        </div>

        <div class="form-group">
            <label for="LuongCoBan1Ca">Lương cơ bản 1 ca</label>
            <input type="number" class="form-control" id="LuongCoBan1Ca" name="LuongCoBan1Ca" value="@Model.LuongCoBan1Ca" />
        </div>

        <div class="form-group">
            <label for="LuongTangCa1Gio">Lương tăng ca 1 giờ</label>
            <input type="number" class="form-control" id="LuongTangCa1Gio" name="LuongTangCa1Gio" value="@Model.LuongTangCa1Gio" />
        </div>

        <button type="submit" class="btn btn-primary mt-3">Cập nhật</button>
        <a asp-action="Index" class="btn btn-secondary mt-3">Hủy</a>
    </form>
</div>

<script>
    function validateForm() {
        var isValid = true;

        // Reset lỗi trước khi kiểm tra lại
        $("#hoError").text("");
        $("#tenError").text("");
        $("#diaChiError").text("");

        // Kiểm tra họ
        var ho = $("#Ho").val();
        if (!ho.trim()) {
            $("#hoError").text("Họ không được để trống.");
            $("#Ho").addClass("is-invalid");
            isValid = false;
        } else {
            $("#Ho").removeClass("is-invalid");
        }

        // Kiểm tra tên
        var ten = $("#Ten").val();
        if (!ten.trim()) {
            $("#tenError").text("Tên không được để trống.");
            $("#Ten").addClass("is-invalid");
            isValid = false;
        } else {
            $("#Ten").removeClass("is-invalid");
        }

        // Kiểm tra địa chỉ
        var diaChi = $("#DiaChi").val();
        if (!diaChi.trim()) {
            $("#diaChiError").text("Địa chỉ không được để trống.");
            $("#DiaChi").addClass("is-invalid");
            isValid = false;
        } else {
            $("#DiaChi").removeClass("is-invalid");
        }

        return isValid; // Nếu tất cả điều kiện đều đúng, form sẽ được submit
    }
</script>
